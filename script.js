const questions = [
    { 
        type: "text",
        question: "Самый удивительный человек в моей жизни – это ты! Правда: меня всегда восхищало твоё стремление к духовному развитию, которое каким-то чудом уживалось с твоим рационализмом, прагматизмом и техническим складом ума. А какая у тебя фантазия! Свобода и практичность великолепно уживаются в твоей творческой натуре. И ты потрясающий изобретатель в этом плане: только тебе под силу создать невообразимую, но практически реализуемую идею. Больше комплиментов я скажу в следующих вопросах, чтобы не заставлять тебя читать поэмы. Однако сейчас пожелаю тебе развивать свои навыки и найти им применение в любой сфере, куда бы ни привёл тебя твой жизненный путь.",
        correctText: "СПАСИБО", 
    },
    { 
        type: "single",
        question: "Внимательность к деталям – это ещё одно твоё качество, которым я не перестаю восхищаться. Ты способен увидеть то, на что обычный человек никогда не посмотрит. Это даёт преимущество, которое я желаю тебе научиться применять. Как самому внимательному, я задам тебе такой вопрос (ну, разумеется, с подвохом): какой датой отправлено моё любимое видео из нашего диалога в тг?)", 
        answers: ["26.08.2024", "06.09.2023 ", "21.09.2023", "02.01.2023 "], 
        correct: 3, 
        hints: ["Ну, нож ведь так и не выпал, что тут тогда классного?", "Ну ты и хорни….", "Да, Берт лучший, но на другое видео попал ещё более приятный момент…"] 
    },
    { 
        type: "single",
        question: "Иногда твоя способность нестандартно мыслить и видеть больше, чем остальные, играет с тобой злую шутку, и ты начинаешь усложнять простые вещи. Желаю обрести баланс и научиться относиться проще к тому, что не требует усложнений. Вот, потренируйся (нет, не на турнике): Сколько будет 2+2? Выбери соответствующий вариант ответа:", 
        answers: ["4", "3", "Столько же, сколько и 94-205+16*7-99/6+19,5", "0", "Сдаюсь (только попробуй тыкнуть сюда..."], 
        correct: 3, 
        hints: ["Подумай ещё", "Ну и как это получилось?", "Серьёзно, Вов?... И это ты не усложняешь?", "", "Не дай бог ты это видишь..."] 
    },
    { 
        type: "single",
        question: "Ну вот видишь! А ведь всего-то надо было выбрать четвёртый вариант ответа. Так, ну, получается, нужно ещё попрактиковаться с упрощениями – тяжело идут как-то. Тогда попробуем другое задание: ответь мне так, чтобы я не обиделась. Что ты выберешь, если я скажу: «Ну отчислюсь я, а потом, возможно, не поступлю, и что тогда?»  ", 
        answers: ["Давай-ка напряжём воображение: я забуду сразу про унижение… ", "Да поступишь ты. В тот раз так же говорила ", "Тогда не отчисляйся ", "Ну и ладно, зачем этот диплом, один же есть уже", "Не поступишь в Питере – уедешь в Екб", "Сдаюсь (только попробуй тыкнуть сюда..."], 
        correct: 5, 
        hints: ["Это ОЧЕНЬ неправильный ответ", "Ага, да, конечно, обесцень мои переживания", "Обидная интонация", "Логично, но неправильно", "Грубая интонация"] 
    },
    { 
        type: "text",
        question: "Ладно, наверное, стоит сменить тему, потому что я так себе учитель по упрощению. А вот ты учитель потрясающий – и это ещё одно твоё великолепное качество! Ты умеешь располагать к себе, объяснять, поддерживать, хвалить и создавать нужный настрой. Главное не забывать самому гореть, пока зажигаешь других, Огонёк. Я помню, что в прошлогоднем квесте промахнулась с выбором песен для кроссворда, и в другой раз обещала выбрать что-то из Моргена. Так что репертуар сменила. Но я не смогла сделать электронный кроссворд, поэтому поищи бумажный на коробке :):", 
        correctText: "градостроитель", 
    },
    { 
        type: "single",
        question: "Ну что, в этот раз лучше плейлист? Надеюсь, да. Можно было и «инженер-конструктор» загадать, но ты бы до следующего года буквы подбирал) Вообще мне кажется, что все специальности, которые ты получил, тебе подходят. Каждый твой выбор не случайный, а дополняющий, раскрывающий новые качества твоей личности и открывающий тебе глаза на самого себя. Поэтому я желаю тебе быть смелым в принятии решений, даже если они не очень тебе нравятся. Ведь чаще всего ты сам не знаешь, что тебе интереснее, пока не начнешь рассказывать про неинтересное. Нужно пробовать всё, чтобы лучше понимать себя самого и свои приоритеты. Вспомнишь из какой книги выделенная фраза?)", 
        answers: ["Путь на100ящего мужчины", "Алхимик", "Триумфальная арка", "Над пропастью во ржи"], 
        correct: 3,  
    },
    { 
        type: "text",
        question: [
            "Ладно, я как-то задушнила уже) Вот нормальное задание – загадки:" + "<pre> </pre>" + "1) То он нападёт некстати, Когда дел невпроворот. То зовёшь его к кровати, А он вовсе не идёт." + "<pre> </pre>" + "2) Он стоит и всем мешает, А особенно с утра. Это каждый взрослый знает – От него не жди добра." + "<pre> </pre>" + "3)	Что суём мы в дырочку? Всунем – нам приятно. Только не намочим вдруг – Выпадет обратно." + "<pre> </pre>" + "Напиши ответы с маленькой буквы и с пробелами между словами",
        ],
        correctText: "сон будильник нитка", 
    },
    { 
        type: "text",
        question: [
            "Всё правильно! А как насчёт такой загадки:" + "<pre> </pre>" + "Эротически звучащая сантехническая деталь" + "<pre> </pre>",
        ],
        correctText: "стояк", 
    },
    { 
        type: "text",
        question: "Какой ты догадистый)) А тепрь проверим твою память:" + "<pre> </pre>" + "Вспомнишь правильный ответ?)", 
        correctText: "пафос", 
    },
    {
        type: "text",
        question: "Какой ты догадистый)) Напоследок нужно что-то посложнее… Вот:" + "<pre> </pre>" + "'Ldflwfnm 25+6+20+29+18+10' ", 
        correctText: "Двадцать четыре",
    },
    {
        type: "single",
        question: "Надеюсь, тебе было весело) мне, вот, было, когда я это составляла)) Раз уж ты такой молодец, что добрался до этого пункта и справился со всеми заданиями, то я наконец-то могу отдать тебе главный подарок. Последняя загадка – ключ к тому сообщению, которое я жду от тебя, чтобы выдать приз",
        answers: ["К последней загадке"],
        correct: 0,
    },
    {
        type: "single",
        question: "Жду подтверждение, что загадка разгадана :)",
        answers: ["Подсказка 1", "Подсказка 2", "Подсказка 3", "Завершить квест"],
        correct: 3,
        hints: ["В прошлом году я очень криво нарисовала спортивную площадку мсг, и это стало интересной задачей квеста, так что в этом году я решила повторить свой триумф с картой", "Найди адрес", "Выжми максимум из своего зрения и цветовосприятия", ""],
    }
];

let currentQuestion = 0;
let score = 0;

document.getElementById('startBtn').addEventListener('click', startQuest);

function startQuest() {
    document.getElementById('content').innerHTML = '';
    showQuestion();
}

function showQuestion() {
    if (currentQuestion < questions.length) {
        const question = questions[currentQuestion];
        const questionHTML = `<h2>${'Вопрос ' + (currentQuestion + 1)}</h2>
                              <p>${question.question}</p>`;
        document.getElementById('content').innerHTML = questionHTML;

        if (question.type === "text") {
            const input = document.createElement("input");
            input.type = "text";
            const nextButton = document.createElement("button");
            nextButton.innerText = "Проверить";
            nextButton.disabled = true;

            input.addEventListener("input", () => {
                nextButton.disabled = input.value.trim() === '';
            });

            nextButton.addEventListener("click", () => {
                checkAnswer(input.value.trim());
            });

            document.getElementById('content').appendChild(input);
            document.getElementById('content').appendChild(nextButton);

        } else if (question.type === "single") {
            question.answers.forEach((answer, index) => {
                const button = document.createElement("button");
                button.innerText = answer;
                button.onclick = () => checkAnswer(index);
                document.getElementById('content').appendChild(button);
            });
        }
    } else {
        showCompletion();
    }
}

function checkAnswer(selected) {
    const question = questions[currentQuestion];
    if (question.type === "single" && selected === question.correct) {
        currentQuestion++;
        showQuestion();
    } else if (question.type === "text" && selected.toLowerCase() === question.correctText.toLowerCase()) {
        currentQuestion++;
        showQuestion();
    } else {
        alert(question.hints[selected] || "Неправильный ответ, попробуйте еще раз.");
    }
}


function showCompletion() {
    document.getElementById('content').innerHTML = '<h1>Квест завершён</h1>';
    typeText("Ты 9 из 9", 0);
}

function typeText(text, index) {
    if (index < text.length) {
        document.getElementById('content').innerHTML += text.charAt(index);
        setTimeout(() => typeText(text, index + 1), 100);
    } else {
        setTimeout(() => addNines("Ты 9 из 9!!!"), 1000);
    }
}

function addNines(text) {
    let count = 9;
    const interval = setInterval(() => {
        text = text.slice(0, 2) + " " + count + " из 9";
        document.getElementById('content').innerHTML = text;
        count += 9990;
        if (count == 99) {
            clearInterval(interval);
        }
    }, 500);
}
